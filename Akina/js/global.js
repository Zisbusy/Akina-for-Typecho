var ajaxcomments=function(){var $body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");var comments_order="DESC";var comment_list=".comment-list";var comments=".noticom";var comment_reply=".comment-reply-link";var comment_form="#commentform";var respond="#comments-ajax";var textarea="#comment";var submit_btn="#submit";var new_id="";var parent_id="";click_bind();$(comment_form).submit(function(){$(".comment-respond textarea").css({border:"2px  solid #DDE6EA"});$(".commenttext").css({border:"2px  solid #DDE6EA"});$("#submit").val("提交中...");if($("#comment-author-info").length>0){var authorValue=$("#author").val().replace(/(^\s*)|(\s*$)/g,"");var mailValue=$("#mail").val().replace(/(^\s*)|(\s*$)/g,"");var urlValue=$("#url").val().replace(/(^\s*)|(\s*$)/g,"");var textValue=$(comment_form).find(textarea).val().replace(/(^\s*)|(\s*$)/g,"");var errorNum=0;if(authorValue==""){errorNum++;$("#author").css({border:"2px dashed #ff6c6c"})}if(mailValue==""){errorNum++;$("#mail").css({border:"2px dashed #ff6c6c"})}if(urlValue!=""){if(urlValue.indexOf("https://")==-1&&urlValue.indexOf("http://")==-1){errorNum++;$("#url").css({border:"2px dashed #ff6c6c"})}}if(textValue==""){errorNum++;$(".comment-respond textarea").css({border:"2px dashed #ff6c6c"})}if(errorNum!=0){$("#comment-author-info").show();$("#toggle-comment-info").html("[ 隐藏 ] ↑");setTimeout(function(){$("#submit").val("再次提交")},500);return false}}$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serializeArray(),async:true,error:function(){$("#submit").val("提交失败");return false},success:function(data){try{if(!$(comment_list,data).length){$("#comment-author-info").show();var msg=$(data)[7].innerHTML.replace(/\s*/g,"");$(document).ready(function(){$.alert("提示",msg)});setTimeout(function(){$("#submit").val("再次提交")},500);return false}else{new_id=$(comment_list,data).html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop();if($(".page-navigator .prev").length&&parent_id==""){new_id="";var dd=$(".prev a").attr("href");$(".prev a").attr("href","");dd=dd.replace(/comment-page-(.*?)#comments/,"comment-page-1#comments");$(".prev a").attr("href",dd);$(".prev a").get(0).click()}if(parent_id){data=$("#li-comment-"+new_id,data).hide();if($("#"+parent_id).find(".children").length<=0){$("#"+parent_id).append("<div class='children'><ol class='comment-list'></ol></div>")}if(new_id)$("#"+parent_id+" .children .comment-list").prepend(data);parent_id=""}else{data=$("#li-comment-"+new_id,data).hide();if(!$(comment_list).length)$(respond).append('<ol class="comment-list"></ol>');$(comment_list).prepend(data)}setTimeout(function(){$("#submit").val("提交成功")},2e3);$("#li-comment-"+new_id).fadeIn();var num;$(comments).length?(num=parseInt($(comments).text().match(/\d+/)),$(comments).html($(comments).html().replace(num,num+1))):0;TypechoComment.cancelReply();$(textarea).html("");$(textarea).val("");$(comment_reply+" #cancel-comment-reply-link").unbind("click");click_bind();if(new_id){$body.animate({scrollTop:$("#li-comment-"+new_id).offset().top-200},900)}else{$body.animate({scrollTop:$("#comments").offset().top-200},900)}setTimeout(function(){$("#submit").val("发表评论")},3e3)}}catch(e){window.location.reload()}}});return false});function click_bind(){$(comment_reply).click(function(){parent_id=$(this).parent().parent().parent().attr("id");$(textarea).focus()});$("#cancel-comment-reply-link").click(function(){parent_id=""})}};$(function(){var h1=0;var h2=50;var ss=$(document).scrollTop();$(window).scroll(function(){var s=$(document).scrollTop();if(s==h1){$(".site-header").removeClass("yya")}if(s>h1){$(".site-header").addClass("yya")}if(s>h2){$(".site-header").addClass("gizle");if(s>ss){$(".site-header").removeClass("sabit")}else{$(".site-header").addClass("sabit")}ss=s}})});var mNav=function(){$(".iconflat").on("click",function(){$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")})};var mNav_hide=function(){if($("body").hasClass("navOpen")){$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")}};var loadSingle=function(){$("#pagination a").live("click",function(){$(this).addClass("loading").text("");$.ajax({type:"POST",url:$(this).attr("href")+"#main",success:function(data){result=$(data).find("#main .post");nextHref=$(data).find("#pagination a").attr("href");$("#main").append(result.fadeIn(300));$("#pagination a").removeClass("loading").text("加载更多");if(nextHref!=undefined){$("#pagination a").attr("href",nextHref)}else{$("#pagination")[0].innerHTML='<span class="nextStop">没有了</span>'}}});return false})};$body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");$("#comments-navi a").live("click",function(e){e.preventDefault();$.ajax({type:"POST",url:$(this).attr("href"),beforeSend:function(){$("#comments-navi").remove();$("#comments-ajax").remove();$("#loading-comments").slideDown();$body.animate({scrollTop:$("#comments-list-title").offset().top-65},800)},dataType:"html",success:function(out){result=$(out).find("#comments-ajax");nextlink=$(out).find("#comments-navi");$("#loading-comments").slideUp("fast");$("#loading-comments").after(result.fadeIn(500));$("#comments-ajax").after(nextlink)}})});var loading=function(){$(window).preloader({delay:500})};var clickEvent=function(){ajaxcomments();$(".smli-button").click(function(){$(".smilies-box").fadeToggle("fast")});$("#toggle-comment-info").click(function click_comment_info(){var comment_info=$("#toggle-comment-info");var author_info=$("#comment-author-info");if(author_info.css("display")=="none"){comment_info.html("[ 隐藏 ] ↑")}else{comment_info.html("[ 修改 ] ↓")}author_info.slideToggle("slow")});$(".donate").click(function(){$(".donate_inner").fadeToggle("fast")});$(".archives").hide();$(".archives:first").show();$("#archives-temp h3").click(function(){$(this).next().slideToggle("fast");return false});baguetteBox.run(".entry-content",{captions:function(element){return element.getElementsByTagName("img")[0].alt},noScrollbars:true});function removeBox(){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}$(".js-toggle-search").on("click",function(){removeBox()});$(".js-search").click(function(){event.stopPropagation();removeBox()});$(".js-search").children().click(function(){event.stopPropagation();if($(this)[0].className!="search-form__inner"){removeBox()}});$(".search-div").click(function(){event.stopPropagation();removeBox()});$(".search-div").children().click(function(){event.stopPropagation();if($(this)[0].className!="submit"){removeBox()}});$(".comments-hidden").show();$(".comments-main").hide();$(".comments-hidden").click(function(){$(".comments-main").slideDown(500);$(".comments-hidden").hide()})};jQuery(document).ready(function($){var offset=100,offset_opacity=1200,scroll_top_duration=700,$back_to_top=$(".cd-top");$(window).scroll(function(){$(this).scrollTop()>offset?$back_to_top.addClass("cd-is-visible"):$back_to_top.removeClass("cd-is-visible cd-fade-out");if($(this).scrollTop()>offset_opacity){$back_to_top.addClass("cd-fade-out")}});$back_to_top.on("click",function(event){event.preventDefault();$("body,html").animate({scrollTop:0},scroll_top_duration)});if(app.pjax){$(document).pjax("a[target!=_top]","#page",{fragment:"#page",timeout:8e3}).on("pjax:send",function(){$("body").append('<div id="preloader"><div id="preloader-inner"></div></div>')}).on("pjax:complete",function(){clickEvent();$("#preloader").remove()})}if(xl==1){var finished=false;var winH=$(window).height();var scrollHandler=function(){var pageH=$(document.body).height();var scrollT=$(window).scrollTop();var aa=(pageH-winH-scrollT)/winH;if(!finished&&aa<.3){$("#pagination a").click();finished=true;setTimeout(function(){finished=false},500)}};$(window).scroll(scrollHandler)}});(function($){loading();clickEvent();loadSingle();mNav()})(jQuery);var preLigut=document.getElementsByTagName("pre");for(var i=0;i<preLigut.length;i++){if(preLigut[i].className==""){preLigut[i].classList.add("language-js")}}$(document).ready(function(){$("a[href*='://']:not(a[href^='"+document.location.protocol+"//"+document.location.host+"'],a[href^='javascript:'])").attr({target:"_blank",rel:"nofollow noopener noreferrer"});$(".links a[href*='://']").removeAttr("rel")});function Fytx_Tips(){var _this=this;_this.Fytx_alert=function(obj){if($("div").is(".fytx_alert_background"))$(".fytx_alert_background").remove();var _fytx_alert_background='<div class="fytx_alert_background"><div class="fytx_alert_box">'+'<div class="fytx_alert_title">'+obj.title+"</div>"+'<div class="fytx_alert_message">'+obj.message+"</div>"+'<span class="fytx_alert_btn">知道了</span>'+"</div></div>";$("body").append(_fytx_alert_background)}}$(document).ready(function(){var Fytx=new Fytx_Tips;$.alert=function(title,msg){Fytx.Fytx_alert({title:title,message:msg})},$("body").on("click",".fytx_alert_btn",function(){$(".fytx_alert_background").hide()})});let tables=document.getElementsByTagName("table");if(tables.length!=0){for(i=0;i<tables.length;i++){var tableFather=document.createElement("div");tableFather.className="table-box";tableFather.appendChild(tables[i].parentNode.replaceChild(tableFather,tables[i]))}}let doc=document.getElementById("toc-container");if(doc!=null){let postbgBox=document.getElementsByClassName("pattern-center");let uptoTop=660;let fixtoTop=460;if(postbgBox.length==0){uptoTop=160;fixtoTop=-40}window.onscroll=function(){let toTop=document.documentElement.scrollTop||document.body.scrollTop;if(toTop>uptoTop){let boxtoTop=toTop-fixtoTop;doc.style.cssText="top: "+boxtoTop+"px;"}else{doc.style.cssText=""}}}console.log("%cAkina for Typecho 4.0.1","background:#ff6d6d;color:#fff;margin:10px;padding:6px;","https://zhebk.cn");